(this.webpackJsonpvisualizer=this.webpackJsonpvisualizer||[]).push([[0],{28:function(e,t,a){e.exports=a(84)},33:function(e,t,a){},37:function(e,t,a){},57:function(e,t,a){},58:function(e,t,a){},59:function(e,t,a){},78:function(e,t,a){},79:function(e,t,a){},80:function(e,t,a){},81:function(e,t,a){},82:function(e,t,a){},83:function(e,t,a){},84:function(e,t,a){"use strict";a.r(t);var n=a(1),r=a.n(n),c=a(7),l=a.n(c),i=(a(33),a(34),a(3)),o=a(14),u={initialize:function(){return o.a.initialize("UA-169178928-1")},pageview:function(e){return o.a.pageview(e)},event:function(e,t,a){return o.a.event({category:e,action:t,label:a})}},s=a(10),m={dissipating:!1,radius:2};var d=function(e){var t=e.incidents.map((function(e){var t=e.geocoding;return new google.maps.LatLng(t.lat,t.long)}));return r.a.createElement(s.b,{data:t,options:m})},v=function(e,t){var a=Math.pow(e.lat-t.lat,2),n=Math.pow(e.long-t.long,2);return Math.sqrt(a+n)},f=function(e,t){for(var a=v(e,t[0].geocoding),n={name:t[0],distance:a,coordinate:t[0].geocoding},r=0;r<t.length;r+=1){var c=t[r].geocoding,l=v(e,c);l<n.distance&&(n.name=t[r].city,n.distance=l,n.coordinate=c)}return n},p=["visualization"],h=Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0}).REACT_APP_GOOGLE_API_KEY||"AIzaSyDGPAOkljsjapYWRKo89y6McxkZ3JzwZKI",E={flex:"1",height:"100vh"},g={center:{lat:38,lng:-98},restriction:{latLngBounds:{north:52,south:22,west:-136,east:-60}},zoom:5,mapTypeControl:!1,fullscreenControl:!1,streetViewControl:!1};var b=function(e){var t=e.incidents,a=e.onCityClick,n=r.a.useState(null),c=Object(i.a)(n,2),l=c[0],o=c[1],m=r.a.useCallback((function(e){o(e)}),[]);return r.a.createElement(s.c,{libraries:p,googleMapsApiKey:h},r.a.createElement(s.a,{mapContainerStyle:E,options:g,onLoad:m,onClick:function(e){if(0!==t.length){var n=f({lat:e.latLng.lat(),long:e.latLng.lng()},t);l.setZoom(8),l.panTo({lat:Number(n.coordinate.lat),lng:Number(n.coordinate.long)}),u.event("Map","Clicked on a city",n.name),a(n.name)}}},r.a.createElement(d,{incidents:t})))},y=a(27),k=a(5),w=a(15);a(37);function C(e){var t=e.defaultInput,a=e.onClear,n=e.onSearch,c=r.a.useState(t),l=Object(i.a)(c,2),o=l[0],s=l[1],m=function(e){u.event("Omnibox","Searched for term",o),n(o),e.preventDefault()};return r.a.createElement("div",{className:"omnibox"},r.a.createElement("form",{onSubmit:m},r.a.createElement(k.c,{className:"icon logo",onClick:function(){u.event("Omnibox","Logo clicked",o),window.open("https://github.com/police-brutality-2020/visualizer","police-brutality-2020")}}),r.a.createElement("input",{type:"text",value:o,placeholder:"Search Police Brutality",onFocus:function(e){return e.target.select()},onChange:function(e){return s(e.target.value)}}),r.a.createElement(w.b,{className:"icon",onClick:m}),r.a.createElement("div",{className:"divider"}),r.a.createElement(w.a,{className:"icon",onClick:function(){u.event("Omnibox","Cleared input"),a(),s("")}})))}C.defaultProps={defaultInput:"",onClear:function(){},onSearch:function(){}};var O=C,N=a(85),S=a(26),L=a.n(S),j=function(e){var t=new URL(e);try{return function(e){switch(e.hostname.match(/[^.]+\.\w+$/)[0]){case"cnn.com":case"cbslocal.com":case"denverpost.com":case"miamiherald.com":case"nytimes.com":case"theguardian.com":case"wapo.st":return[r.a.createElement(k.g,null),e.hostname];case"fbcdn.net":case"facebook.com":return[r.a.createElement(k.b,null),e.hostname];case"google.ca":case"google.com":return[r.a.createElement(k.d,null),e.hostname];case"instagram.com":return[r.a.createElement(k.e,null),e.hostname];case"redd.it":case"reddit.com":return[r.a.createElement(k.h,null),e.pathname.match(/r\/[^/]+/)[0]];case"tiktok.com":return[r.a.createElement(k.j,null),e.pathname.match(/@\w+/)[0]];case"twitter.com":return[r.a.createElement(k.i,null),"@".concat(e.pathname.match(/([^/]+)/)[1])];case"youtu.be":case"youtube.com":return[r.a.createElement(k.k,null),e.hostname];default:return[r.a.createElement(k.f,null),e.hostname]}}(t)}catch(a){return[r.a.createElement(k.f,null),t.hostname]}};a(57);var _=function(e){var t=e.type,a=e.date,n=e.description,c=e.videoUrl,l=e.linkUrl,o=e.thumbnailUrl,u=j(l),s=Object(i.a)(u,2)[1];return r.a.createElement("div",{className:"video"},r.a.createElement("a",{href:l,target:"_blank",rel:"noopener noreferrer"},r.a.createElement("img",{src:o,alt:"thumbnail",onError:function(e){return e.target.remove()}}),r.a.createElement("div",{className:"source"},r.a.createElement("div",{className:"label"},s),r.a.createElement("div",{className:"type"},t," \u2022 ",Object(N.a)(new Date(a),"LLLL do, yyyy")))),r.a.createElement("p",null,n),r.a.createElement("video",{controls:!0,onError:function(e){return e.target.parentElement.remove()}},r.a.createElement("source",{type:"video/mp4",src:c}),r.a.createElement("track",{kind:"captions"})))};a(58);var x=function(e){var t=e.data.filter((function(e){return e.video[0]&&e.video[0].streams&&e.video[0].streams[0]})).map((function(e){var t=e.video[0],a=t.streams[0];return r.a.createElement(_,{key:e.id,type:t.site,date:t.created_at,description:t.description||t.title,linkUrl:t.url,videoUrl:a.url,thumbnailUrl:t.thumbnail})}));return r.a.createElement("div",{className:"evidence"},r.a.createElement("h4",null,"Evidence"),0===t.length?r.a.createElement("p",null,"Videos for this incident are not available yet. Visit the links above to learn more."):t)};a(59);function R(e){var t=e.urls.map((function(e){var t=j(e),a=Object(i.a)(t,2),n=a[0],c=a[1];return r.a.createElement("a",{key:e,href:e,target:"_blank",rel:"noopener noreferrer"},n,r.a.createElement("span",null,c))}));return r.a.createElement("div",{className:"links"},t)}R.defaultProps={urls:[]};var D=R,T=a(8),z=a.n(T),P=a(12),U=a(13),I=a.n(U),A=function(e){var t=Object(n.useState)(null),a=Object(i.a)(t,2),r=a[0],c=a[1];return Object(n.useEffect)((function(){(function(){var t=Object(P.a)(z.a.mark((function t(){var a,n;return z.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,I.a.get("https://api.846policebrutality.com/api/incidents/".concat(e,"?include=evidence"));case 2:a=t.sent,n=a.data,c(n.data[0]);case 5:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}})()()}),[e]),r};a(78);var K=function(e){var t=e.id,a=e.hideResultDetail,n=A(t);return n?r.a.createElement("div",{className:"result-details"},r.a.createElement("div",{className:"header"},r.a.createElement(k.a,{onClick:a}),r.a.createElement("div",null,r.a.createElement("h3",null,n.title),r.a.createElement("p",null,n.city,", ",n.state," \u2022"," ",Object(N.a)(new Date(n.date),"LLLL do, yyyy")))),r.a.createElement("div",{className:"divider"}),r.a.createElement(D,{urls:n.links}),r.a.createElement("div",{className:"divider"}),r.a.createElement(x,{data:n.evidence})):r.a.createElement("div",{className:"results-details-loader"},r.a.createElement(L.a,{type:"TailSpin",color:"#000000",height:50,width:50,timeout:3e3}))};a(79);var M=function(e){var t=e.id,a=e.title,n=e.city,c=e.state,l=e.date,i=e.onResultClick,o=function(){u.event("SearchResult","Result clicked",a),i(t)};return r.a.createElement("div",{className:"search-result",role:"button",tabIndex:0,onClick:o,onKeyDown:o},r.a.createElement("h4",null,a),r.a.createElement("p",null,n,", ",c," \u2022 ",Object(N.a)(new Date(l),"LLLL do, yyyy")))};a(80);var B=function(e){var t=e.search,a=e.results,n=e.onResultClick,c=a.map((function(e){return r.a.createElement(M,{id:e.id,key:e.id,title:e.title,city:e.city,state:e.state,date:e.date,onResultClick:n})}));return 0===c.length?r.a.createElement("div",{className:"search-results empty"},r.a.createElement("h4",null,'No results for "',t,'"'),r.a.createElement("p",null,"Make sure your search is spelled correctly. Try searching for a city, state, or police department."),r.a.createElement("p",{className:"call-to-action"},"Think you've found a bug?"),r.a.createElement("a",{href:"https://github.com/police-brutality-2020/visualizer",target:"_blank",rel:"noopener noreferrer"},"Let us know on GitHub.")):r.a.createElement("div",{className:"search-results"},c)};a(81);var V=function(e){var t=e.search,a=e.results,n=e.isOpen,c=r.a.useState(null),l=Object(i.a)(c,2),o=l[0],u=l[1];return r.a.createElement("div",{className:"panel ".concat(n?"open":"")},r.a.createElement("div",{className:"omnibox-spacer"}),o?r.a.createElement(K,{hideResultDetail:function(){return u(!1)},id:o}):r.a.createElement(B,{search:t,results:a,onResultClick:u}))},W=new y.a([],{includeScore:!0,isCaseSensitive:!1,threshold:.3,keys:["city","state","title"]});var G=function(e){var t=e.incidents,a=e.mapValue,n=r.a.useState(""),c=Object(i.a)(n,2),l=c[0],o=c[1];r.a.useEffect((function(){o(a)}),[a]);var u=!!l;W.setCollection(t);var s=W.search(l).map((function(e){return e.item})).sort((function(e,t){return t.date.localeCompare(e.date)}));return r.a.createElement(r.a.Fragment,null,r.a.createElement(O,{key:"omnibox-".concat(l),defaultInput:l,onClear:function(){return o("")},onSearch:o}),r.a.createElement(V,{key:"panel-".concat(l),search:l,results:s,isOpen:u}))};a(82);var H=function(){return r.a.createElement("footer",null,r.a.createElement("a",{href:"https://github.com/2020PB/police-brutality"},"Source"))},J=function(){var e=Object(n.useState)([]),t=Object(i.a)(e,2),a=t[0],r=t[1];return Object(n.useEffect)((function(){(function(){var e=Object(P.a)(z.a.mark((function e(){var t,a;return z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,I.a.get("https://api.846policebrutality.com/api/incidents");case 2:t=e.sent,a=t.data,r(a.data);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[]),a};a(83);var Z=function(){u.initialize(),u.pageview("/");var e=r.a.useState(""),t=Object(i.a)(e,2),a=t[0],n=t[1],c=J();return c?r.a.createElement("div",{className:"app"},r.a.createElement(G,{incidents:c,mapValue:a}),r.a.createElement(b,{incidents:c,onCityClick:n}),r.a.createElement(H,null)):null};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(Z,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[28,1,2]]]);
//# sourceMappingURL=main.96161c33.chunk.js.map